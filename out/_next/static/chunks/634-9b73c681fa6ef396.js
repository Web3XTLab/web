(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[634],{99843:function(e,t,n){"use strict";var r=n(67294),a=n(73889),u=r.createContext(a.Z);t.Z=u},65573:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}});var r=n(67294),a=n(99843);function u(){return(0,r.useContext)(a.Z)}},73889:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var r=n(34051),a=n.n(r),u=n(3283),o=n.n(u),c=JSON.parse('{"Mt":[{"inputs":[],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"buyer","type":"address"},{"indexed":false,"internalType":"address","name":"seller","type":"address"},{"indexed":false,"internalType":"uint256","name":"tokenId","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"price","type":"uint256"}],"name":"OnBuy","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"seller","type":"address"},{"indexed":false,"internalType":"uint256","name":"tokenId","type":"uint256"},{"indexed":false,"internalType":"string","name":"name","type":"string"},{"indexed":false,"internalType":"uint256","name":"price","type":"uint256"}],"name":"OnSell","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"bool","name":"verified","type":"bool"},{"indexed":false,"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"OnVerify","type":"event"},{"stateMutability":"nonpayable","type":"fallback"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"appMap","outputs":[{"internalType":"uint256","name":"price","type":"uint256"},{"internalType":"address payable","name":"seller","type":"address"}],"stateMutability":"view","type":"function","constant":true},{"inputs":[],"name":"appNTF","outputs":[{"internalType":"contract AppNFT","name":"","type":"address"}],"stateMutability":"view","type":"function","constant":true},{"inputs":[],"name":"totalCount","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function","constant":true},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"getTokenURI","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function","constant":true},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"getAppName","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function","constant":true},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"getAppSeller","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function","constant":true},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"getAppPrice","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function","constant":true},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"getAppBuyers","outputs":[{"internalType":"address[]","name":"buyers","type":"address[]"}],"stateMutability":"view","type":"function","constant":true},{"inputs":[{"internalType":"string","name":"name","type":"string"},{"internalType":"string","name":"tokenURI","type":"string"},{"internalType":"uint256","name":"price","type":"uint256"}],"name":"sell","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"buy","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"payable","type":"function","payable":true},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"},{"internalType":"address","name":"buyer","type":"address"}],"name":"verify","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"}],"QW":{"3":{"events":{},"links":{},"address":"0x3d26362A57A51Bd1C5cFB2f71ca5b56163ac68e4","transactionHash":"0x8c3dca8aa7c2fb6ba9c1cdd6efec4d0be5e466c8b0cb3c8f74ac8b2bc4847454"},"5777":{"events":{},"links":{},"address":"0x4bcD38bDbbF1b209C0e55b206a2C9cB9558C9899","transactionHash":"0x1629e3dccd972e9f1ff2bf45da1ca8feaf7b98a7ffb823bd1bdf54bfd66a92cb"}}}');function s(e,t,n,r,a,u,o){try{var c=e[u](o),s=c.value}catch(i){return void n(i)}c.done?t(s):Promise.resolve(s).then(r,a)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var u=e.apply(t,n);function o(e){s(u,r,a,o,c,"next",e)}function c(e){s(u,r,a,o,c,"throw",e)}o(void 0)}))}}var p={web3Provider:null,contracts:{AppStore:null},web3:null,account:void 0,networkId:void 0,networkAddress:void 0,init:i(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!p.web3){e.next=2;break}return e.abrupt("return",p);case 2:return e.next=4,p.initWeb3();case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)}))),initWeb3:i(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!window.ethereum){e.next=13;break}return p.web3Provider=window.ethereum,e.prev=3,e.next=6,window.ethereum.request({method:"eth_requestAccounts"});case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),console.error("User denied account access");case 11:e.next=14;break;case 13:window.web3?p.web3Provider=window.web3.currentProvider:p.web3Provider=new(o().providers.HttpProvider)("http://localhost:7545");case 14:return p.web3=new(o())(p.web3Provider),e.next=17,p.initContract();case 17:return e.abrupt("return",e.sent);case 20:return e.prev=20,e.t1=e.catch(0),console.error(e.t1),e.abrupt("return",null);case 24:case"end":return e.stop()}}),e,null,[[0,20],[3,8]])}))),initContract:i(a().mark((function e(){var t,n,r,u;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,null===(t=p.web3)||void 0===t?void 0:t.eth.net.getId();case 3:if(r=e.sent){e.next=6;break}return e.abrupt("return",null);case 6:if(p.networkId=r,null===(u=c.QW["".concat(r)])||void 0===u?void 0:u.address){e.next=10;break}return e.abrupt("return",null);case 10:return p.networkAddress=null===u||void 0===u?void 0:u.address,p.contracts.AppStore=new(null===(n=p.web3)||void 0===n?void 0:n.eth.Contract)(c.Mt,u.address),e.prev=12,e.next=15,p.getAccount();case 15:window.ethereum.once("accountsChanged",(function(){location.reload()})),window.ethereum.once("chainChanged",(function(){location.reload()})),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(12),console.error(e.t0);case 22:return e.abrupt("return",p);case 23:case"end":return e.stop()}}),e,null,[[12,19]])}))),getAccount:i(a().mark((function e(){var t,n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!p.account){e.next=3;break}return e.abrupt("return",p.account);case 3:return e.next=5,null===(t=p.web3)||void 0===t?void 0:t.eth.getAccounts();case 5:if(e.t0=e.sent,e.t0){e.next=8;break}e.t0=[];case 8:return n=e.t0,p.account=n[0],e.abrupt("return",p.account);case 11:case"end":return e.stop()}}),e)}))),checkAvailable:function(){return!!window.ethereum},sell:function(){var e=i(a().mark((function e(t,n,r){var u,o,c,s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=4,p.getAccount();case 4:return c=e.sent,console.log("account",c),null===(u=p.contracts.AppStore)||void 0===u||u.events.OnSell({}).on("data",(function(e){console.log("sell",e)})).on("error",(function(e){console.log(e)})),e.next=9,null===(o=p.contracts.AppStore)||void 0===o?void 0:o.methods.sell(t,n,r).send({from:c});case 9:if(s=e.sent){e.next=12;break}return e.abrupt("return",null);case 12:return e.abrupt("return",s);case 15:return e.prev=15,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return",null);case 19:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t,n,r){return e.apply(this,arguments)}}(),buy:function(){var e=i(a().mark((function e(t,n){var r,u,o,c;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=4,p.getAccount();case 4:return o=e.sent,console.log("account",o),null===(r=p.contracts.AppStore)||void 0===r||r.events.OnBuy({}).on("data",(function(e){console.log("buy",e)})).on("error",(function(e){console.log(e)})),e.next=9,null===(u=p.contracts.AppStore)||void 0===u?void 0:u.methods.buy(t).send({from:o,value:n});case 9:if(c=e.sent){e.next=12;break}return e.abrupt("return",null);case 12:return e.abrupt("return",c);case 15:return e.prev=15,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return",null);case 19:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t,n){return e.apply(this,arguments)}}(),verify:function(){var e=i(a().mark((function e(t){var n,r,u;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=4,p.getAccount();case 4:return r=e.sent,console.log("account",r),e.next=8,(null===(n=p.contracts.AppStore)||void 0===n?void 0:n.methods.verify(t,r)).call();case 8:return u=e.sent,e.abrupt("return",!!u);case 12:return e.prev=12,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}(),totalCount:i(a().mark((function e(){var t,n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=4,null===(t=p.contracts.AppStore)||void 0===t?void 0:t.methods.totalCount().call();case 4:if(n=e.sent){e.next=7;break}return e.abrupt("return","0");case 7:return e.abrupt("return",n);case 10:return e.prev=10,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return","0");case 14:case"end":return e.stop()}}),e,null,[[0,10]])}))),tokenURI:function(){var e=i(a().mark((function e(t){var n,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=4,null===(n=p.contracts.AppStore)||void 0===n?void 0:n.methods.getTokenURI(t).call();case 4:if(r=e.sent){e.next=7;break}return e.abrupt("return","");case 7:return e.abrupt("return",r);case 10:return e.prev=10,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return","");case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),tokenURIs:i(a().mark((function e(){var t,n,r,u,o,c;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.prev=1,e.next=5,null===(n=p.contracts.AppStore)||void 0===n?void 0:n.methods.totalCount().call();case 5:r=e.sent,u=0;case 7:if(!(u<Number(r))){e.next=16;break}return e.next=11,null===(o=p.contracts.AppStore)||void 0===o?void 0:o.methods.getTokenURI("".concat(u)).call();case 11:(c=e.sent)&&t.push(c);case 13:u++,e.next=7;break;case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(1),console.error(e.t0);case 21:return e.prev=21,e.abrupt("return",t);case 24:case"end":return e.stop()}}),e,null,[[1,18,21,24]])}))),getAppInfo:function(){var e=i(a().mark((function e(t){var n,r,u,o,c,s,i,l;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,null===(n=p.contracts.AppStore)||void 0===n?void 0:n.methods.getAppName(t).call();case 3:if(e.t0=e.sent,e.t0){e.next=6;break}e.t0="";case 6:return c=e.t0,e.next=9,null===(r=p.contracts.AppStore)||void 0===r?void 0:r.methods.getAppPrice(t).call();case 9:if(e.t1=e.sent,e.t1){e.next=12;break}e.t1="";case 12:return s=e.t1,e.next=15,null===(u=p.contracts.AppStore)||void 0===u?void 0:u.methods.getAppSeller(t).call();case 15:if(e.t2=e.sent,e.t2){e.next=18;break}e.t2="";case 18:return i=e.t2,e.next=21,null===(o=p.contracts.AppStore)||void 0===o?void 0:o.methods.getAppBuyers(t).call();case 21:if(e.t3=e.sent,e.t3){e.next=24;break}e.t3=[];case 24:return l=e.t3,e.abrupt("return",{name:c,price:s,seller:i,buyers:l});case 26:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},l=p},62859:function(){},75304:function(){},88677:function(){},62808:function(){},46601:function(){},89214:function(){},71922:function(){},2363:function(){},52361:function(){},94616:function(){},6567:function(){},56773:function(){},33557:function(){}}]);